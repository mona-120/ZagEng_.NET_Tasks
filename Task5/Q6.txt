namespace Linq_Task
{
    internal class Program
    {
        static void Main(string[] args)
        {
            List<Employee> employees =
            [
                 new ("Ali", "Engineering", 9000m),
                 new ("Sara", "Engineering", 8500m),
                 new ("Omar", "HR", 6000m),
                 new ("Mona", "HR", 6200m),
                 new ("Yara", "Marketing", 7000m),
                 new ("Karim", "Marketing", 7500m),
                 new ("Nada", "Engineering", 9500m)
            ];

            // Project Employee type to anonymous type
            Console.WriteLine("Anonymous Type: ");
            var AnonymousType = employees.Select(e => new
            {
                FullName = e.Name.ToUpper(),
                e.Salary
            });
            foreach (var employee in AnonymousType)
            {
                Console.WriteLine(employee);
            }

            // Project Employee type to formatted string
            Console.WriteLine("\nFormatted String: ");
            var formattedString = employees.Select(e => $"{e.Name} works in {e.Department} - EGP {e.Salary}");
            foreach (var employee in formattedString)
            {
                Console.WriteLine(employee);
            }


            // Project Employee type to DTO
            var ToDTO = employees.Select(e => new EmployeeDTO(e.Name, e.Salary));
            Console.WriteLine("\nEmployeeDTO: ");
            foreach (var employee in ToDTO)
            {
                Console.WriteLine(employee);
            }

            // Sort by Salary descending ,then useing indexed Select to add Rank
            var SortedSalary = employees.OrderByDescending(e => e.Salary)
                                        .Select((e, index) => new
                                        {
                                            index,
                                            e.Name,
                                            e.Salary
                                        });

            Console.WriteLine("\nSortedSalary using indexed Select: ");
            foreach (var employee in SortedSalary)
            {
                Console.WriteLine($"Rank = {employee.index + 1}, Name = {employee.Name}, Salary = {employee.Salary}");
            }


            // Project each employee to include a "SeniorityLevel" using ternary operator to deceide SeniorityLevel using anonymous type
            Console.WriteLine("\nAfter Adding SeniorityLevel: ");
            var AddSeniorityLevel = employees.Select(e => new
            {
                e.Name,
                e.Salary,
                SeniorityLevel = e.Salary >= 9000 ? "Senior" : e.Salary >= 7000 ? "Mid" : "Junior"
            });
            foreach (var e in AddSeniorityLevel) { Console.WriteLine(e); }

        }

    }
    record Employee(string Name, string Department, decimal Salary);
    // record DTO
    record EmployeeDTO(string Name, decimal Salary);
    
}